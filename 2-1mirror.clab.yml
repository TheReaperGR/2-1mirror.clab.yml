topologyContent:
  name: srl01
  topology:
    nodes:
      srl1:
        kind: nokia_srlinux
        image: ghcr.io/nokia/srlinux
        startup-config: |
          set / interface ethernet-1/1 admin-state enable
          set / interface ethernet-1/1 subinterface 0
          set / interface ethernet-1/1 subinterface 0 admin-state enable
          set / interface ethernet-1/1 subinterface 0 ipv4 admin-state enable
          set / interface ethernet-1/1 subinterface 0 ipv4 address 192.168.10.254/24

          # ethernet-1/2
          set / interface ethernet-1/2 admin-state enable
          set / interface ethernet-1/2 subinterface 0
          set / interface ethernet-1/2 subinterface 0 admin-state enable
          set / interface ethernet-1/2 subinterface 0 ipv4 admin-state enable
          set / interface ethernet-1/2 subinterface 0 ipv4 address 192.168.20.254/24

          # ethernet-1/3 (local SPAN/mirror destination)
          set / interface ethernet-1/3 admin-state enable
          set / interface ethernet-1/3 subinterface 0
          set / interface ethernet-1/3 subinterface 0 type local-mirror-dest
          set / interface ethernet-1/3 subinterface 0 admin-state enable

          # mgmt0 (DHCP-based management)
          set / interface mgmt0 admin-state enable
          set / interface mgmt0 subinterface 0
          set / interface mgmt0 subinterface 0 admin-state enable
          set / interface mgmt0 subinterface 0 ipv4 admin-state enable
          set / interface mgmt0 subinterface 0 ipv4 dhcp-client
          set / interface mgmt0 subinterface 0 ipv6 admin-state enable
          set / interface mgmt0 subinterface 0 ipv6 dhcp-client

          # â”€â”€â”€ Network-Instance Configuration â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
          set / network-instance default
          set / network-instance default interface ethernet-1/1.0
          set / network-instance default interface ethernet-1/2.0

          # â”€â”€â”€ System Information â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
          set / system information location {{.Env.SRL_LOCATION}}

          # â”€â”€â”€ Mirroring Configuration â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
          set / system mirroring mirroring-instance 1 admin-state enable
          set / system mirroring mirroring-instance 1 mirror-source interface ethernet-1/1 direction ingress-egress
          set / system mirroring mirroring-instance 1 mirror-source interface ethernet-1/2 direction ingress-egress
          set / system mirroring mirroring-instance 1 mirror-destination local ethernet-1/3.0
      br10:
        kind: bridge
      br20:
        kind: bridge
      br30:
        kind: bridge
    links:
    - endpoints:
      - srl1:e1-1
      - br10:eth1
    - endpoints:
      - srl1:e1-2
      - br20:eth2
    - endpoints:
      - srl1:e1-3
      - br30:eth3
